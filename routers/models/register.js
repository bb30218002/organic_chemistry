let ans_name_idx = [

    {
        question: 1,
        answer_idx: 1,
        name_reaction: "フィッシャーインドール合成",
        url: "https://www.chem-station.com/odos/2009/06/fischer-fischer-indole-synthes.html",
        ques_type: 0,
        level: "E"
    },

    {
        question: 2,
        answer_idx: 2,
        name_reaction: "ファヴォルスキー転位",
        url: "https://www.chem-station.com/odos/2009/07/favorskii-favorskii-rearrangem.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 3,
        answer_idx: 1,
        name_reaction:"バイヤー・ビリガー酸化",
        url: "https://www.chem-station.com/odos/2009/06/baeyer-villiger-baeyer-villige.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 4,
        answer_idx: 2,
        name_reaction:"ランバーグ・バックランド転位",
        url: "https://www.chem-station.com/odos/2009/09/ramberg-backlund-ramberg-backl.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 5,
        answer_idx: 0,
        name_reaction: "ライマー・チーマン反応",
        url: "https://www.chem-station.com/odos/2009/07/reimer-tiemann.html",
        ques_type: 1,
        level: "S"
    },
    {
        question: 6,
        answer_idx: 1,
        name_reaction:"ウィッティヒ反応 ",
        url: "https://www.chem-station.com/odos/2009/06/wittig-wittig-reaction.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 7,
        answer_idx: 1,
        name_reaction:"ベックマン転位 ",
        url: "https://www.chem-station.com/odos/2009/06/beckmann-beckmann-rearrangemen.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 8,
        answer_idx: 2,
        name_reaction:"ホーナー・ワズワース・エモンス反応",
        url: "https://www.chem-station.com/odos/2009/06/horner-wadsworth-emmons-hwe.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 9,
        answer_idx: 3,
        name_reaction:"アフマトヴィッチ反応",
        url: "https://www.chem-station.com/odos/2011/05/achmatowicz-reaction.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 10,
        answer_idx: 3,
        name_reaction:"ヴィルスマイヤー・ハック反応",
        url: "https://www.chem-station.com/odos/2009/06/vilsmeier-haack-vilsmeier-haac.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 11,
        answer_idx: 2,
        name_reaction:"ネバー転位",
        url: "https://www.chem-station.com/odos/2009/09/neber-neber-rearrangement.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 12,
        answer_idx: 0,
        name_reaction:"シモンズ・スミス反応",
        url: "https://www.chem-station.com/odos/2009/06/simmons-smith-simmons-smith-re.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 13,
        answer_idx: 3,
        name_reaction:"ホフマン転位",
        url: "https://www.chem-station.com/odos/2009/07/hofmann.html",
        ques_type: 2,
        level: "S"
    },
    {
        question: 14,
        answer_idx: 2,
        name_reaction:"スワーン酸化",
        url: "https://www.chem-station.com/odos/2009/06/swern-swern-oxidation.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 15,
        answer_idx: 2,
        name_reaction:"コーリー・フックス アルキン合成",
        url: "https://www.chem-station.com/odos/2009/06/corey-fuchs-corey-fuchs-acetyl.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 16,
        answer_idx: 3,
        name_reaction:"クルチウス転位",
        url: "https://www.chem-station.com/odos/2009/06/curtius-curtius-rearrangement.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 17,
        answer_idx: 3,
        name_reaction:"クライゼン転位",
        url: "https://www.chem-station.com/odos/2009/06/claisen-claisen-rearrangement.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 18,
        answer_idx: 2,
        name_reaction:"バーチ還元 ",
        url: "https://www.chem-station.com/odos/2009/06/birch-birch-reduction.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 19,
        answer_idx: 2,
        name_reaction:"ピーターソンオレフィン化",
        url: "https://www.chem-station.com/odos/2009/07/peterson-peterson-olefination.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 20,
        answer_idx: 1,
        name_reaction:"光延反応",
        url: "https://www.chem-station.com/odos/2009/06/-mitsunobu-reaction.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 21,
        answer_idx: 1,
        name_reaction:"フリーデル・クラフツ アシル化",
        url: "https://www.chem-station.com/odos/2009/06/friedel-crafts-friedel-crafts.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 22,
        answer_idx: 3,
        name_reaction:"ワッカー酸化",
        url: "https://www.chem-station.com/odos/2009/06/wacker-wacker-oxidation.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 23,
        answer_idx: 2,
        name_reaction:"シャープレス・香月不斉エポキシ化反応",
        url: "https://www.chem-station.com/odos/2009/06/sharplesssharpless-katsukiasym.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 24,
        answer_idx: 3,
        name_reaction:"レフォルマトスキー反応",
        url: "https://www.chem-station.com/odos/2009/06/reformatsky.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 25,
        answer_idx: 1,
        name_reaction:"ウォルフ・キシュナー還元",
        url: "https://www.chem-station.com/odos/2009/06/wolff-kishner-wolff-kishner-re.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 26,
        answer_idx: 3,
        name_reaction:"バートン・マクコンビー脱酸素化",
        url: "https://www.chem-station.com/odos/2009/06/barton-mccombie-barton-mccombi.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 27,
        answer_idx: 1,
        name_reaction:"ウォール・チーグラー臭素化",
        url: "https://www.chem-station.com/odos/2009/06/wohl-ziegler-wohl-ziegler-brom.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 28,
        answer_idx: 3,
        name_reaction:"マンニッヒ反応",
        url: "https://www.chem-station.com/odos/2009/06/mannich.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 29,
        answer_idx: 1,
        name_reaction:"ブラウンヒドロホウ素化反応",
        url: "https://www.chem-station.com/odos/2009/06/brown-brown-hydroboration.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 30,
        answer_idx: 1,
        name_reaction:"溝呂木・ヘック反応 ",
        url: "https://www.chem-station.com/odos/2009/06/-heck-mizoroki-heck-reaction.html",
        ques_type: 0,
        level: "E"
    }
    
];

let ans_name_idxNo2 = [

    {
        question: 31,
        answer_idx: 0,
        name_reaction:"ピニック酸化",
        url: "https://www.chem-station.com/odos/2009/07/pinnickkraus-pinnickkraus-oxid.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 32,
        answer_idx: 3,
        name_reaction:"ハロホルム反応",
        url: "https://www.chem-station.com/odos/2009/07/-haloform-reaction.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 33,
        answer_idx: 2,
        name_reaction:"アッペル反応",
        url: "https://www.chem-station.com/odos/2009/06/appel-appel-reaction.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 34,
        answer_idx: 2,
        name_reaction:"スマイルス転位",
        url: "https://www.chem-station.com/odos/2010/01/-smiles-rearrangement.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 35,
        answer_idx: 1,
        name_reaction:"パーキン反応",
        url: "https://www.chem-station.com/odos/2009/06/perkin-perkin-reaction.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 36,
        answer_idx: 1,
        name_reaction:"ガブリエルアミン合成",
        url: "https://www.chem-station.com/odos/2009/06/-gabriel-amine-synthesis.html",
        ques_type: 3,
        level: "E"
    },
    {
        question: 37,
        answer_idx: [3,4],
        name_reaction:"カニッツァロ反応",
        url: "https://www.chem-station.com/odos/2009/06/cannizzaro-cannizzaro-reaction.html",
        ques_type: 4,
        level: "S"
    },
    {
        question: 38,
        answer_idx: 2,
        name_reaction:"ディールスアルダー反応 (エンド則)",
        url: "https://www.chem-station.com/odos/2009/06/diels-alder.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 39,
        answer_idx: 2,
        name_reaction:"プリリツェフ エポキシ化(Henbest則)",
        url: "https://www.chem-station.com/odos/2009/06/prilezhaev-prilezhaev-epoxidat.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 40,
        answer_idx: 3,
        name_reaction:"プリリツェフ エポキシ化",
        url: "https://www.chem-station.com/odos/2009/06/prilezhaev-prilezhaev-epoxidat.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 41,
        answer_idx: 1,
        name_reaction:"ピナコール転位",
        url: "https://www.chem-station.com/odos/2009/06/pinacol-pinacol-rearrangement.html",
        ques_type: 0,
        level: "E"
    },
    {
        question: 42,
        answer_idx: 1,
        name_reaction:"マクマリーカップリング",
        url: "https://www.chem-station.com/odos/2009/06/mcmurry-mcmurry-coupling.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 43,
        answer_idx: 1,
        name_reaction:"ワートン反応",
        url: "https://www.chem-station.com/odos/2010/01/-wharton-reaction.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 44,
        answer_idx: 0,
        name_reaction:"ロビンソン・ガブリエルオキサゾール合成",
        url: "https://www.chem-station.com/odos/2009/07/robinson-gabriel-robinson-gabr.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 45,
        answer_idx: 0,
        name_reaction:"バルツ・シーマン反応",
        url: "https://www.chem-station.com/odos/2009/07/balz-schiemann-balz-schiemann.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 46,
        answer_idx: 3,
        name_reaction:"グリース反応",
        url: "https://www.youtube.com/watch?v=kDO1g7tkM34",
        ques_type: 0,
        level: "E"
    },
    {
        question: 47,
        answer_idx: 2,
        name_reaction:"デーキン酸化",
        url: "https://www.youtube.com/watch?v=semmsbPF4II",
        ques_type: 0,
        level: "S"
    },
    {
        question: 48,
        answer_idx: 2,
        name_reaction:"ニーメントウスキーキノリン合成",
        url: "https://www.chem-station.com/odos/2009/09/niementowski-niementowski-quin.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 49,
        answer_idx: 2,
        name_reaction:"福山アミン合成",
        url: "https://www.chem-station.com/odos/2009/06/-fukuyama-amine-synthesis.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 50,
        answer_idx: 1,
        name_reaction:"ベンジル酸転位",
        url: "https://www.chem-station.com/odos/2009/07/-benzilic-acid-rearrangement.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 51,
        answer_idx: 2,
        name_reaction:"ミニスキ反応",
        url: "https://www.chem-station.com/odos/2012/12/minisci-reaction.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 52,
        answer_idx: 3,
        name_reaction:"プメラー転位",
        url: "https://www.chem-station.com/odos/2009/06/pummerer-pummerer-rearrangemen.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 53,
        answer_idx: 3,
        name_reaction:"バンバーガー転位",
        url: "https://www.youtube.com/watch?v=o3D4HuFa94s",
        ques_type: 0,
        level: "S"
    },
    {
        question: 54,
        answer_idx: 0,
        name_reaction:"塩素化(SN2型)",
        url: "https://cchemstock.com/halogenation/socl2/",
        ques_type: 0,
        level: "E"
    },
    {
        question: 55,
        answer_idx: 2,
        name_reaction:"塩素化(SNi型)",
        url: "https://cchemstock.com/halogenation/socl2/",
        ques_type: 0,
        level: "H"
    },
    {
        question: 56,
        answer_idx: 3,
        name_reaction:"ノリッシュ反応",
        url: "https://www.chem-station.com/odos/2011/04/-norissh-reaction.html",
        ques_type: 0,
        level: "H"
    },
    {
        question: 57,
        answer_idx: 2,
        name_reaction:"チチバビン反応",
        url: "https://www.chem-station.com/odos/2009/09/chichibabin-chichibabin-reacti.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 58,
        answer_idx: 1,
        name_reaction:"ロビンソン環化",
        url: "hhttps://www.youtube.com/watch?v=uAg4rQHPHIc",
        ques_type: 0,
        level: "E"
    },
    {
        question: 59,
        answer_idx: 0,
        name_reaction:"森田・ベイリス・ヒルマン反応",
        url: "https://www.chem-station.com/odos/2009/06/-baylis-hillman-morita-baylis-.html",
        ques_type: 0,
        level: "S"
    },
    {
        question: 60,
        answer_idx: 1,
        name_reaction:"ディークマン縮合",
        url: "https://www.chem-station.com/odos/2009/07/dieckmann-dieckmann-condensati.html",
        ques_type: 0,
        level: "E"
    }
]


let exception_sel = (index, exception) => {

    if(exception.indexOf(index) !== -1){

        return true;

    }else{

        return false;

    }
}

let parseObj = (literal, dir, exception) => {

    literal.map((value, index) => {

        let Number = value.question;
        value["scheme_path"] = `name_reaction\\${dir}\\No${Number}.png`;
    
        const flag = exception_sel(index + 1, exception);
        const selections = [];
    
        if (flag){
            for(t = 1; t < 7; t++){
                selections.push(`name_reaction\\${dir}\\No${Number}-${t}.png`);
            }
        }else{
            for(t = 1; t < 5; t++){
                selections.push(`name_reaction\\${dir}\\No${Number}-${t}.png`);
            }
        }
    
        value["selections"] = selections;
    });  

}


// オブジェクトリテラル整形
let exc_No1 = [6,7,15];
parseObj(ans_name_idx, "questions", exc_No1);

let exc_No2 = [7];
parseObj(ans_name_idxNo2, "questions_No2", exc_No2);

// データベースへの登録

const sqlite3 = require("sqlite3").verbose();

const db = new sqlite3.Database("./name_reaction.db");

db.serialize(() => {

　　// トランザクションの開始
    db.exec("BEGIN TRANSACTION");

　　// 　　テーブルの更新
    db.run ("DROP TABLE IF EXISTS rmd");
    db.run ("DROP TABLE IF EXISTS rsd");
    db.run("DROP TABLE IF EXISTS rqd");

　　// データスキーマ
    db.run("CREATE TABLE IF NOT EXISTS rmd (scheme VARCHAR, question INT, answer_idx INT, name_reaction VARCHAR, url VARCHAR, ques_type INT, level CHAR)");
    db.run("CREATE TABLE IF NOT EXISTS rsd (question INT, sel VARCHAR)");
    db.run("CREATE TABLE IF NOT EXISTS rqd(ques_type INT, sentence VARCHAR)");

    const stmt_rmd = db.prepare("INSERT INTO rmd VALUES(?, ? ,? ,?, ?, ?, ?)");
    const stmt_rsd = db.prepare("INSERT INTO rsd VALUES(?, ?)");
    const stmt_rqd = db.prepare("INSERT INTO rqd VALUES(?, ?)");

　　// データの登録
    ans_name_idx.map((v) => {

        const array = [v.scheme_path, v.question, v.answer_idx, v.name_reaction, v.url, v.ques_type, v.level];
        stmt_rmd.run(array);

        const sel_col = v.selections;
        console.log(sel_col);
        sel_col.map((sel) => {
            stmt_rsd.run([v.question, sel]);
        });
    });

    ans_name_idxNo2.map((v) => {

        const array = [v.scheme_path, v.question, v.answer_idx, v.name_reaction, v.url, v.ques_type, v.level];
        stmt_rmd.run(array);

        const sel_col = v.selections;
        console.log(sel_col);
        sel_col.map((sel) => {
            stmt_rsd.run([v.question, sel]);
        });
    });


　　// 問題文の登録   
    stmt_rqd.run([0, "Which is main product A ?"]);
    stmt_rqd.run([1, "Which is correct as functional group X ?"]);
    stmt_rqd.run([2, "Which is the wrong intermediate in this reaction ?"]);
    stmt_rqd.run([3, "Select the appropriate reagent from the options below."]);
    stmt_rqd.run([4, "Which are main product A1 and A2 ?"]);


    stmt_rmd.finalize();
    stmt_rsd.finalize();
    stmt_rqd.finalize();

    db.exec("COMMIT");

});

db.close();